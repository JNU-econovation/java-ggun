# Chp5. 책임과 메시지

<aside>
💡 자율적인 책임

</aside>

- 객체지향 공동체를 구성하는 기본단위 == 자율적인 객체
    - 자신의 원칙에 따라 판단
- 책임 : 요청을 처리하기 위해 객체가 수행하는 행동
- 적절한 책임 → 자율적인 객체 →  유연하고 단순한 협력

<aside>
💡 추상적인 책임

</aside>

- 추상적이고 포괄적인 책임 ⇒ 유연성 생김
- 단, 책임은 협력에 참여하는 의도를 명확하게 설명할 수 있는 수준 안에서 추상적이어야 한다
- 자율성의 판단 기준? ⇒ 문맥에 따라 다르다!

<aside>
💡 자율적인 책임의 특징

</aside>

- 어떻게? x ⇒ 어떻게 할지는 자율적으로 선택하기 때문
- 무엇을? o

<aside>
💡 메시지

</aside>

- 객체가 다른 객체에 접근할 수 있는 유일한 방법
- 메시지 이름(message name) : 전송하는 메시지
    - 메시지 인자(argument) : 추가정보(언제 어디서)
    - ex) 증언하라(어제, 왕국)
    - ex) 모자장수.증언하라(어제,왕국)
- 모자장수 : 객체
- 증언하라 : 메서드(메시지)
- 어제, 왕국 : 파라미터(메시지 인자)

<aside>
💡 메서드

</aside>

- 메시지를 처리할 방법
- 객체가 메시지를 처리하기 위해 내부적으로 선택하는 방법 == 메서드
- 메시지는 어떻게 수행될 것인지 명시하지 않는다. ⇒ 무엇이 실행될지만 명시

<aside>
💡 다형성

</aside>

- 서로다른 유형의 객체가 동일한 메시지에 대해 서로 다르게 반응하는 것을 의미
- 서로 다른 타입에 속하는 객체들이 동일한 메시지를 수신할 경우, 서로 다른 메서드를 이용해 메시지를 처리할 수 메커니즘
- 왜?
    - 메시지에는 무엇이 실행될지만 명시되기 때문.
    - 어떻게는 객체가 정한다!
- 다형성 만족 == 서로 다른 객체들이 동일한 책임을 공유 == 동일한 역할 수행 가능
- 다형성 → 대체가능성 → 설계 유연&재사용 가능 → 수신자의 종류를 모르더라도 메시지 전송 가능
    - 즉, 다형성은 수신자 종류를 캡슐화한다!
    - 다형성 ⇒ 메시지 이해 가능한 어떤 객체와도 협력 가능 ⇒ 유연&확장 가능한 구조 ⇒ 협력을 유연하게 만듦

<aside>
💡 유연&확장 가능&재사용성 높은 협력이 설계의 품질에 끼치는 영향?

</aside>

- 협력이 유연해진다.
- 협력이 수행되는 방식을 확장할 수 있다.
- 협력이 수행되는 방식을 재사용할 수 있다.

<aside>
💡 객체지향의 핵심 메시지

</aside>

- 객체지향이란
    - 어떤 객체가 어떤 메시지를 전송할 수 있는가, 어떤 객체가 어떤 메시지를 이해할 수 있는가를 중심으로 객체 사이의 협력 관계를 구성하는 것
- 문맥에서 벗어나 독립적인 객체에 관해 고민하는 것? → 객체지향 아님
    - 클래스에 초점을 맞추는 것과 차이가 없다.
- 객체가 메시지를 선택하는 것이 아님! → 메시지가 객체를 선택하게 해야함!
    - 메시지 중심으로 협력 설계

<aside>
💡 책임-주도 설계

</aside>

- 객체지향 설계
    - 적절한 책임을 적절한 객체에게 할당하면서 메시지를 기반으로 협력하는 객체들의 관계를 발견하는 과정
- 책임-주도 설계란?
    - 책임을 완수하기 위해 협력하는 객체들을 이용해 시스템을 설계하는 방법
    - 과정
        - 시스템의 책임을 객체의 책임으로 할당
        - 객체는 도움이 필요하다 판단되면 어떤 메시지가 필요한지 결정한다
        - 메시지 수신하기에 적합한 객체를 선택한다
        - 수신자는 송신자가 기대한대로 메시지를 처리할 책임이 있다.
        - 즉, 메시지가 수신자의 책임을 결정한다.

<aside>
💡 What/Who 사이클

</aside>

- 책임주도설계의 핵심 == 어떤행위가 필요한지 결정 → 행위를 수행할 객체를 결정
    - 이것을 what/who 사이클이라고 한다.
    - 어떤행위 == 메시지

<aside>
💡 인터페이스

</aside>

- 두 사물이 마주치는 경계 지점에서 서로 상호작용할 수 있게 이어주는 방법이나 장치
- 인터페이스의 특징
    - 인터페이스의 사용법을 익히기만 하면 내부 구조나 동작 방식을 몰라도 쉽게 대상을 조작하거나 의사를 전달할 수 있다.
    - 인터페이스 자체는 변경하지 않고 단순히 내부 구성이나 작동 방식만을 변경하는 것은 인터페이스 사용자에게 어떤 영향도 미치지 않는다
    - 대상이 변경되더라도 동일한 인터페이스를 제공하기만 하면 아무런 문제없이 상호작용 할 수 있다.

<aside>
💡 메시지가 인터페이스를 결정한다

</aside>

- 인터페이스는 객체가 수신할 수 있는 메시지의 목록으로 구성됨
- 어떤 메시지를 수신할 수 있는지가 객체가 제공하는 인터페이스의 모양을 빚는다

<aside>
💡 공용 인터페이스

</aside>

- 외부에 공개된 인터페이스
- 책임 = 객체가 메시지를 수신했을 때 수행해야하는 객체의 행동

<aside>
💡 인터페이스와 구현의 분리

</aside>

- 객체지향 3가지 원칙
    - 좀 더 추상적인 인터페이스
    - 최소 인터페이스
    - 인터페이스와 구현 간에 차이가 있다는 점을 인식
        - 객체의 외부 = 공용인터페이스
        - 객체의 내부 =구현
- 인터페이스와 구현의 분리 원칙
    - 객체 외부에 노출되는 인터페이스와 객체내부에 숨겨지는 구현을 명확하게 분리해서 고려해야한다.
    - == 캡슐화

<aside>
💡 캡슐화란?

</aside>

- 객체의 자율성 보존을 위해 구현을 외부로부터 감추는 것
- 두가지 관점
    - 상태와 행위의 캡슐화
        - 데이터 캡슐화
    - 사적인 비밀의 캡슐화

<aside>
💡 책임의 자율성 ⇒ 협력의 품질 결정?

</aside>

- 자율적인 책임은 협력을 단순하게 만듦
- 자율적인 책임은 모자 장수의 외부와 내부를 명확하게 분리
    - 요청객체가 몰라도 되는 사적인 부분이 캡슐화되기 때문에 인터페이스와 구현이 분리됨
- 책임이 자율적일 경우 책임을 수행하는 내부적인 방법을 변경하더라도 외부에 영향을 미치지 않는다.
    - 변경의 파급효과가 객체 내부로 캡슐화 되기 때문에 두 객체간 결합도가 낮아진다
- 자율적인 책임은 협력의 대상을 다양하게 선택할 수 있는 유연성을 제공한다.
- 객체가 수행하는 책임들이 자율적일수록 객체의 역할을 이해하기 쉬워진다.

결론 ⇒ 책임 자율적 ⇒ 추상화, 응집도 높아짐, 결합도 낮아짐, 캡슐화 증진, 인터페이스와 구현의 명확히 분리, 설계의 유연성과 재사용성 향상